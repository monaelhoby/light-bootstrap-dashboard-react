{"ast":null,"code":"import { db } from \"../../firebase\";\nexport const handleDeactiveApp = (user, product, theApp, setUser) => {\n  let newUser = user; // theProducts = newUser.products;\n\n  let editableProduct = newUser.products.find(p => {\n    return p.name == product.name;\n  });\n  console.log(\"before\", newUser.products);\n  newUser.products = newUser.products.filter(p => {\n    return p.name !== product.name;\n  });\n  console.log(\"after\", newUser.products);\n  editableProduct.apps.forEach(app => {\n    if (app.name.name == theApp.name.name) {\n      app.deviceId = \"\";\n    }\n  });\n  newUser.products.push(editableProduct); // console.log(\"editableProduct\", editableProduct)\n\n  setUser({ ...newUser\n  }); // db.collection(\"users\").doc(user.uid).get().then(snapshot =>{\n  //   let theUser = [];\n  // snapshot.data().products.forEach(p=>{\n  //     let oneProduct = {};\n  //     oneProduct.name = p.name;\n  //     oneProduct.visibility = p.visibility;\n  //     oneProduct.apps = p.apps;\n  //     oneProduct.comments = p.comment;\n  //     oneProduct.purchased = p.purchased;\n  //     oneProduct.purchasedUrl = p.purchasedUrl;\n  //     oneProduct.unpurchasedUrl = p.unpurchasedUrl;\n  //     oneProduct.datePurchased = p.datePurchased;\n  //     p.apps.forEach(app=>{\n  //         if(oneProduct.name == product.name){\n  //             if(app == theApp.name){\n  //                 oneProduct.apps.push({\n  //                 name:app,\n  //                 active:false,\n  //                 purchased: false,\n  //                 credentials : false,\n  //                 expireDate: \"30/3/2021\",\n  //                 timesAppLaunchedLastLogin : 3,\n  //                 timesAppLaunchedPurchased : 4,\n  //                 lastLaunchDate : \"23-12-2020\",\n  //                 timesAppLaunched : 7,\n  //                 deviceId : \" \"\n  //                 })\n  //             }else {\n  //                 oneProduct.apps.push({\n  //                 name:app,\n  //                 active:app.active,\n  //                 purchased: false,\n  //                 credentials : false,\n  //                 expireDate: \"30/3/2021\",\n  //                 timesAppLaunchedLastLogin : 3,\n  //                 timesAppLaunchedPurchased : 4,\n  //                 lastLaunchDate : \"23-12-2020\",\n  //                 timesAppLaunched : 7,\n  //                 deviceId : \"878866\"\n  //             })\n  //             }\n  //         }\n  //     })\n  //     theUser.products.push(oneProduct);\n  //     // console.log(\"the user is \", theUser.products)\n  //   })\n  //   console.log(theUser)\n  //   return db.collection('users').doc(user.uid).set(theUser) \n  //   })\n  // .catch(err=>{\n  //   console.log(err);\n  // })\n};","map":{"version":3,"sources":["E:/Folder/React/projects/my_freelance_work/M.Ramdan Work/light-bootstrap-dashboard-react/src/components/userPortal/appAction.js"],"names":["db","handleDeactiveApp","user","product","theApp","setUser","newUser","editableProduct","products","find","p","name","console","log","filter","apps","forEach","app","deviceId","push"],"mappings":"AAAA,SAASA,EAAT,QAAmB,gBAAnB;AAGA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,IAAD,EAAMC,OAAN,EAAcC,MAAd,EAAqBC,OAArB,KAAiC;AAC9D,MAAIC,OAAO,GAAGJ,IAAd,CAD8D,CAE9D;;AACA,MAAIK,eAAe,GAAGD,OAAO,CAACE,QAAR,CAAiBC,IAAjB,CAAsBC,CAAC,IAAE;AAC3C,WAAOA,CAAC,CAACC,IAAF,IAAUR,OAAO,CAACQ,IAAzB;AACH,GAFqB,CAAtB;AAGAC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAqBP,OAAO,CAACE,QAA7B;AAEAF,EAAAA,OAAO,CAACE,QAAR,GAAmBF,OAAO,CAACE,QAAR,CAAiBM,MAAjB,CAAwBJ,CAAC,IAAE;AAC1C,WAAOA,CAAC,CAACC,IAAF,KAAWR,OAAO,CAACQ,IAA1B;AACH,GAFkB,CAAnB;AAGAC,EAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBP,OAAO,CAACE,QAA5B;AAEAD,EAAAA,eAAe,CAACQ,IAAhB,CAAqBC,OAArB,CAA6BC,GAAG,IAAI;AAChC,QAAIA,GAAG,CAACN,IAAJ,CAASA,IAAT,IAAiBP,MAAM,CAACO,IAAP,CAAYA,IAAjC,EAAsC;AAClCM,MAAAA,GAAG,CAACC,QAAJ,GAAe,EAAf;AACH;AACJ,GAJD;AAKAZ,EAAAA,OAAO,CAACE,QAAR,CAAiBW,IAAjB,CAAsBZ,eAAtB,EAlB8D,CAqB9D;;AAGAF,EAAAA,OAAO,CAAC,EAAC,GAAGC;AAAJ,GAAD,CAAP,CAxB8D,CA4B9D;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,CAnFI","sourcesContent":["import { db } from \"../../firebase\";\r\n\r\n\r\nexport const handleDeactiveApp = (user,product,theApp,setUser) => {\r\n    let newUser = user;\r\n    // theProducts = newUser.products;\r\n    let editableProduct = newUser.products.find(p=>{\r\n        return p.name == product.name;\r\n    })\r\n    console.log(\"before\",newUser.products)\r\n    \r\n    newUser.products = newUser.products.filter(p=>{\r\n        return p.name !== product.name;\r\n    })\r\n    console.log(\"after\",newUser.products)\r\n\r\n    editableProduct.apps.forEach(app => {\r\n        if (app.name.name == theApp.name.name){\r\n            app.deviceId = \"\";\r\n        }\r\n    });\r\n    newUser.products.push(editableProduct);\r\n\r\n\r\n    // console.log(\"editableProduct\", editableProduct)\r\n\r\n\r\n    setUser({...newUser})\r\n\r\n\r\n\r\n    // db.collection(\"users\").doc(user.uid).get().then(snapshot =>{\r\n    //   let theUser = [];\r\n      \r\n    \r\n    // snapshot.data().products.forEach(p=>{\r\n          \r\n    //     let oneProduct = {};\r\n    //     oneProduct.name = p.name;\r\n    //     oneProduct.visibility = p.visibility;\r\n    //     oneProduct.apps = p.apps;\r\n    //     oneProduct.comments = p.comment;\r\n    //     oneProduct.purchased = p.purchased;\r\n    //     oneProduct.purchasedUrl = p.purchasedUrl;\r\n    //     oneProduct.unpurchasedUrl = p.unpurchasedUrl;\r\n    //     oneProduct.datePurchased = p.datePurchased;\r\n    //     p.apps.forEach(app=>{\r\n    //         if(oneProduct.name == product.name){\r\n    //             if(app == theApp.name){\r\n    //                 oneProduct.apps.push({\r\n    //                 name:app,\r\n    //                 active:false,\r\n    //                 purchased: false,\r\n    //                 credentials : false,\r\n    //                 expireDate: \"30/3/2021\",\r\n    //                 timesAppLaunchedLastLogin : 3,\r\n    //                 timesAppLaunchedPurchased : 4,\r\n    //                 lastLaunchDate : \"23-12-2020\",\r\n    //                 timesAppLaunched : 7,\r\n    //                 deviceId : \" \"\r\n    //                 })\r\n    //             }else {\r\n    //                 oneProduct.apps.push({\r\n    //                 name:app,\r\n    //                 active:app.active,\r\n    //                 purchased: false,\r\n    //                 credentials : false,\r\n    //                 expireDate: \"30/3/2021\",\r\n    //                 timesAppLaunchedLastLogin : 3,\r\n    //                 timesAppLaunchedPurchased : 4,\r\n    //                 lastLaunchDate : \"23-12-2020\",\r\n    //                 timesAppLaunched : 7,\r\n    //                 deviceId : \"878866\"\r\n    //             })\r\n    //             }\r\n    //         }\r\n    //     })\r\n    //     theUser.products.push(oneProduct);\r\n    //     // console.log(\"the user is \", theUser.products)\r\n    //   })\r\n    //   console.log(theUser)\r\n    //   return db.collection('users').doc(user.uid).set(theUser) \r\n    //   })\r\n    // .catch(err=>{\r\n    //   console.log(err);\r\n    // })\r\n  }"]},"metadata":{},"sourceType":"module"}
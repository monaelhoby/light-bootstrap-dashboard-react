{"ast":null,"code":"import { db } from \"../../firebase\";\nexport const handleDeactiveApp = (user, theProduct, theApp) => {\n  db.collection(\"users\").doc(user.uid).get().then(snapshot => {\n    let theUser = snapshot.data();\n    theUser.products = snapshot.data().products;\n    oneProduct = [];\n    theUser.products.forEach(product => {\n      if (theProduct.name == product.name) {\n        product.apps.forEach(app => {\n          if (app.name.name == theApp.name.name) {\n            console.log(snapshot.data().doc(product.name).doc(app.name));\n            app.deviceId = \" \";\n          } // console.log(app.name, theApp.name)\n\n        });\n      }\n    }); //   snapshot.docs.forEach(p=>{\n\n    console.log(snapshot.data()); // let oneProduct = {};\n    // oneProduct.name = p.data().name;\n    // oneProduct.visibility = p.data().visibility;\n    // oneProduct.apps = p.data().apps;\n    // oneProduct.comments = p.data().comment;\n    // oneProduct.purchased = false;\n    // oneProduct.purchasedUrl = p.data().purchasedUrl;\n    // oneProduct.unpurchasedUrl = p.data().unpurchasedUrl;\n    // oneProduct.datePurchased = \"22/1/2021\";\n    // p.data().apps.forEach(app=>{\n    //     oneProduct.apps.push({\n    //         name:app,\n    //         active:false,\n    //         purchased: false,\n    //         credentials : false,\n    //         expireDate: \"30/3/2021\",\n    //         timesAppLaunchedLastLogin : 3,\n    //         timesAppLaunchedPurchased : 4,\n    //         lastLaunchDate : \"23-12-2020\",\n    //         timesAppLaunched : 7,\n    //         deviceId : \" \"\n    //     })\n    // })\n    // if(oneProduct.name == product.name){\n    //     if(app == theApp.name){\n    //         app.deviceId = \" \"\n    //     }\n    // }\n    // theUser.products.push(oneProduct);\n    // console.log(\"the user is \", theUser.products)\n    //   })\n    //   return db.collection('users').set(theUser) \n  }).catch(err => {\n    console.log(err);\n  });\n};","map":{"version":3,"sources":["E:/Folder/React/projects/my_freelance_work/M.Ramdan Work/light-bootstrap-dashboard-react/src/components/userPortal/appAction.js"],"names":["db","handleDeactiveApp","user","theProduct","theApp","collection","doc","uid","get","then","snapshot","theUser","data","products","oneProduct","forEach","product","name","apps","app","console","log","deviceId","catch","err"],"mappings":"AAAA,SAASA,EAAT,QAAmB,gBAAnB;AAGA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,IAAD,EAAMC,UAAN,EAAiBC,MAAjB,KAA4B;AAEzDJ,EAAAA,EAAE,CAACK,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BJ,IAAI,CAACK,GAAhC,EAAqCC,GAArC,GAA2CC,IAA3C,CAAgDC,QAAQ,IAAG;AACzD,QAAIC,OAAO,GAAGD,QAAQ,CAACE,IAAT,EAAd;AACAD,IAAAA,OAAO,CAACE,QAAR,GAAmBH,QAAQ,CAACE,IAAT,GAAgBC,QAAnC;AACAC,IAAAA,UAAU,GAAG,EAAb;AAEAH,IAAAA,OAAO,CAACE,QAAR,CAAiBE,OAAjB,CAA0BC,OAAO,IAAI;AACnC,UAAGb,UAAU,CAACc,IAAX,IAAmBD,OAAO,CAACC,IAA9B,EAAmC;AAC/BD,QAAAA,OAAO,CAACE,IAAR,CAAaH,OAAb,CAAqBI,GAAG,IAAI;AACxB,cAAGA,GAAG,CAACF,IAAJ,CAASA,IAAT,IAAiBb,MAAM,CAACa,IAAP,CAAYA,IAAhC,EAAqC;AACjCG,YAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAACE,IAAT,GAAgBN,GAAhB,CAAoBU,OAAO,CAACC,IAA5B,EAAkCX,GAAlC,CAAsCa,GAAG,CAACF,IAA1C,CAAZ;AACAE,YAAAA,GAAG,CAACG,QAAJ,GAAe,GAAf;AACH,WAJuB,CAKpB;;AACP,SAND;AAOH;AACF,KAVD,EALyD,CAiB3D;;AACMF,IAAAA,OAAO,CAACC,GAAR,CAAYX,QAAQ,CAACE,IAAT,EAAZ,EAlBqD,CAmBvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;AAEA;AACG,GApDH,EAqDCW,KArDD,CAqDOC,GAAG,IAAE;AACVJ,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACD,GAvDD;AAwDD,CA1DI","sourcesContent":["import { db } from \"../../firebase\";\r\n\r\n\r\nexport const handleDeactiveApp = (user,theProduct,theApp) => {\r\n    \r\n    db.collection(\"users\").doc(user.uid).get().then(snapshot =>{\r\n      let theUser = snapshot.data();\r\n      theUser.products = snapshot.data().products;\r\n      oneProduct = []\r\n\r\n      theUser.products.forEach( product => {\r\n        if(theProduct.name == product.name){\r\n            product.apps.forEach(app => {\r\n                if(app.name.name == theApp.name.name){\r\n                    console.log(snapshot.data().doc(product.name).doc(app.name))\r\n                    app.deviceId = \" \"\r\n                }\r\n                    // console.log(app.name, theApp.name)\r\n            })\r\n        }\r\n      })\r\n        \r\n    //   snapshot.docs.forEach(p=>{\r\n          console.log(snapshot.data())\r\n        // let oneProduct = {};\r\n        // oneProduct.name = p.data().name;\r\n        // oneProduct.visibility = p.data().visibility;\r\n        // oneProduct.apps = p.data().apps;\r\n        // oneProduct.comments = p.data().comment;\r\n        // oneProduct.purchased = false;\r\n        // oneProduct.purchasedUrl = p.data().purchasedUrl;\r\n        // oneProduct.unpurchasedUrl = p.data().unpurchasedUrl;\r\n        // oneProduct.datePurchased = \"22/1/2021\";\r\n        // p.data().apps.forEach(app=>{\r\n        //     oneProduct.apps.push({\r\n        //         name:app,\r\n        //         active:false,\r\n        //         purchased: false,\r\n        //         credentials : false,\r\n        //         expireDate: \"30/3/2021\",\r\n        //         timesAppLaunchedLastLogin : 3,\r\n        //         timesAppLaunchedPurchased : 4,\r\n        //         lastLaunchDate : \"23-12-2020\",\r\n        //         timesAppLaunched : 7,\r\n        //         deviceId : \" \"\r\n        //     })\r\n        // })\r\n        // if(oneProduct.name == product.name){\r\n        //     if(app == theApp.name){\r\n        //         app.deviceId = \" \"\r\n        //     }\r\n        // }\r\n        // theUser.products.push(oneProduct);\r\n        // console.log(\"the user is \", theUser.products)\r\n    //   })\r\n\r\n    //   return db.collection('users').set(theUser) \r\n      })\r\n    .catch(err=>{\r\n      console.log(err);\r\n    })\r\n  }"]},"metadata":{},"sourceType":"module"}
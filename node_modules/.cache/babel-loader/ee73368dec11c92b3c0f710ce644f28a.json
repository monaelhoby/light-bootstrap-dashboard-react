{"ast":null,"code":"import { db } from \"../../firebase\";\nexport const handleDeactiveApp = (user, product, theApp) => {\n  db.collection(\"users\").doc(user.uid).get().then(snapshot => {\n    let theUser = [];\n    theUser.products = snapshot.data().products; //   theUser.products.forEach( product => {\n    //     if(theProduct.name == product.name){\n    //         product.apps.forEach(app => {\n    //             if(app.name.name == theApp.name.name){\n    //                 app.deviceId = \" \"\n    //             }\n    //                 console.log(app.deviceId)\n    //         })\n    //     }\n    //   })\n\n    snapshot.docs.products.forEach(p => {\n      console.log(p);\n      let oneProduct = {};\n      oneProduct.name = p.data().name;\n      oneProduct.visibility = p.data().visibility;\n      oneProduct.apps = p.data().apps;\n      oneProduct.comments = p.data().comment;\n      oneProduct.purchased = p.data().purchased;\n      oneProduct.purchasedUrl = p.data().purchasedUrl;\n      oneProduct.unpurchasedUrl = p.data().unpurchasedUrl;\n      oneProduct.datePurchased = p.data().datePurchased;\n      p.data().apps.forEach(app => {\n        oneProduct.apps.push({\n          name: app,\n          active: false,\n          purchased: false,\n          credentials: false,\n          expireDate: \"30/3/2021\",\n          timesAppLaunchedLastLogin: 3,\n          timesAppLaunchedPurchased: 4,\n          lastLaunchDate: \"23-12-2020\",\n          timesAppLaunched: 7,\n          deviceId: \" \"\n        });\n      });\n\n      if (oneProduct.name == product.name) {\n        if (app == theApp.name) {\n          app.deviceId = \" \";\n        }\n      }\n\n      theUser.products.push(oneProduct);\n      console.log(\"the user is \", theUser.products);\n    });\n    return db.collection('users').set({ ...user,\n      theUser\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};","map":{"version":3,"sources":["E:/Folder/React/projects/my_freelance_work/M.Ramdan Work/light-bootstrap-dashboard-react/src/components/userPortal/appAction.js"],"names":["db","handleDeactiveApp","user","product","theApp","collection","doc","uid","get","then","snapshot","theUser","products","data","docs","forEach","p","console","log","oneProduct","name","visibility","apps","comments","comment","purchased","purchasedUrl","unpurchasedUrl","datePurchased","app","push","active","credentials","expireDate","timesAppLaunchedLastLogin","timesAppLaunchedPurchased","lastLaunchDate","timesAppLaunched","deviceId","set","catch","err"],"mappings":"AAAA,SAASA,EAAT,QAAmB,gBAAnB;AAGA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,IAAD,EAAMC,OAAN,EAAcC,MAAd,KAAyB;AAEtDJ,EAAAA,EAAE,CAACK,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BJ,IAAI,CAACK,GAAhC,EAAqCC,GAArC,GAA2CC,IAA3C,CAAgDC,QAAQ,IAAG;AACzD,QAAIC,OAAO,GAAG,EAAd;AACAA,IAAAA,OAAO,CAACC,QAAR,GAAmBF,QAAQ,CAACG,IAAT,GAAgBD,QAAnC,CAFyD,CAK3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACEF,IAAAA,QAAQ,CAACI,IAAT,CAAcF,QAAd,CAAuBG,OAAvB,CAA+BC,CAAC,IAAE;AAC9BC,MAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACF,UAAIG,UAAU,GAAG,EAAjB;AACAA,MAAAA,UAAU,CAACC,IAAX,GAAkBJ,CAAC,CAACH,IAAF,GAASO,IAA3B;AACAD,MAAAA,UAAU,CAACE,UAAX,GAAwBL,CAAC,CAACH,IAAF,GAASQ,UAAjC;AACAF,MAAAA,UAAU,CAACG,IAAX,GAAkBN,CAAC,CAACH,IAAF,GAASS,IAA3B;AACAH,MAAAA,UAAU,CAACI,QAAX,GAAsBP,CAAC,CAACH,IAAF,GAASW,OAA/B;AACAL,MAAAA,UAAU,CAACM,SAAX,GAAuBT,CAAC,CAACH,IAAF,GAASY,SAAhC;AACAN,MAAAA,UAAU,CAACO,YAAX,GAA0BV,CAAC,CAACH,IAAF,GAASa,YAAnC;AACAP,MAAAA,UAAU,CAACQ,cAAX,GAA4BX,CAAC,CAACH,IAAF,GAASc,cAArC;AACAR,MAAAA,UAAU,CAACS,aAAX,GAA2BZ,CAAC,CAACH,IAAF,GAASe,aAApC;AACAZ,MAAAA,CAAC,CAACH,IAAF,GAASS,IAAT,CAAcP,OAAd,CAAsBc,GAAG,IAAE;AACvBV,QAAAA,UAAU,CAACG,IAAX,CAAgBQ,IAAhB,CAAqB;AACjBV,UAAAA,IAAI,EAACS,GADY;AAEjBE,UAAAA,MAAM,EAAC,KAFU;AAGjBN,UAAAA,SAAS,EAAE,KAHM;AAIjBO,UAAAA,WAAW,EAAG,KAJG;AAKjBC,UAAAA,UAAU,EAAE,WALK;AAMjBC,UAAAA,yBAAyB,EAAG,CANX;AAOjBC,UAAAA,yBAAyB,EAAG,CAPX;AAQjBC,UAAAA,cAAc,EAAG,YARA;AASjBC,UAAAA,gBAAgB,EAAG,CATF;AAUjBC,UAAAA,QAAQ,EAAG;AAVM,SAArB;AAYH,OAbD;;AAcA,UAAGnB,UAAU,CAACC,IAAX,IAAmBjB,OAAO,CAACiB,IAA9B,EAAmC;AAC/B,YAAGS,GAAG,IAAIzB,MAAM,CAACgB,IAAjB,EAAsB;AAClBS,UAAAA,GAAG,CAACS,QAAJ,GAAe,GAAf;AACH;AACJ;;AACD3B,MAAAA,OAAO,CAACC,QAAR,CAAiBkB,IAAjB,CAAsBX,UAAtB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BP,OAAO,CAACC,QAApC;AACD,KAhCD;AAkCA,WAAOZ,EAAE,CAACK,UAAH,CAAc,OAAd,EAAuBkC,GAAvB,CAA2B,EAAC,GAAGrC,IAAJ;AAASS,MAAAA;AAAT,KAA3B,CAAP;AACC,GAlDH,EAmDC6B,KAnDD,CAmDOC,GAAG,IAAE;AACVxB,IAAAA,OAAO,CAACC,GAAR,CAAYuB,GAAZ;AACD,GArDD;AAsDD,CAxDI","sourcesContent":["import { db } from \"../../firebase\";\r\n\r\n\r\nexport const handleDeactiveApp = (user,product,theApp) => {\r\n    \r\n    db.collection(\"users\").doc(user.uid).get().then(snapshot =>{\r\n      let theUser = [];\r\n      theUser.products = snapshot.data().products;\r\n        \r\n\r\n    //   theUser.products.forEach( product => {\r\n    //     if(theProduct.name == product.name){\r\n    //         product.apps.forEach(app => {\r\n    //             if(app.name.name == theApp.name.name){\r\n    //                 app.deviceId = \" \"\r\n    //             }\r\n    //                 console.log(app.deviceId)\r\n    //         })\r\n    //     }\r\n    //   })\r\n      snapshot.docs.products.forEach(p=>{\r\n          console.log(p)\r\n        let oneProduct = {};\r\n        oneProduct.name = p.data().name;\r\n        oneProduct.visibility = p.data().visibility;\r\n        oneProduct.apps = p.data().apps;\r\n        oneProduct.comments = p.data().comment;\r\n        oneProduct.purchased = p.data().purchased;\r\n        oneProduct.purchasedUrl = p.data().purchasedUrl;\r\n        oneProduct.unpurchasedUrl = p.data().unpurchasedUrl;\r\n        oneProduct.datePurchased = p.data().datePurchased;\r\n        p.data().apps.forEach(app=>{\r\n            oneProduct.apps.push({\r\n                name:app,\r\n                active:false,\r\n                purchased: false,\r\n                credentials : false,\r\n                expireDate: \"30/3/2021\",\r\n                timesAppLaunchedLastLogin : 3,\r\n                timesAppLaunchedPurchased : 4,\r\n                lastLaunchDate : \"23-12-2020\",\r\n                timesAppLaunched : 7,\r\n                deviceId : \" \"\r\n            })\r\n        })\r\n        if(oneProduct.name == product.name){\r\n            if(app == theApp.name){\r\n                app.deviceId = \" \"\r\n            }\r\n        }\r\n        theUser.products.push(oneProduct);\r\n        console.log(\"the user is \", theUser.products)\r\n      })\r\n\r\n      return db.collection('users').set({...user,theUser}) \r\n      })\r\n    .catch(err=>{\r\n      console.log(err);\r\n    })\r\n  }"]},"metadata":{},"sourceType":"module"}
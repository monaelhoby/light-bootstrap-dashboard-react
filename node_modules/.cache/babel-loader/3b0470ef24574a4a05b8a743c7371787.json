{"ast":null,"code":"import { db } from \"../../firebase\";\nexport const handleDeactiveApp = (user, theProduct, theApp) => {\n  console.log(\"jnh\");\n  db.collection(\"users\").doc(user.uid).get().then(snapshot => {\n    let theUser = snapshot.data();\n    theUser.products = snapshot.data().products;\n    theUser.products.forEach(product => {\n      if (theProduct.name == product.name) {\n        product.apps.forEach(app => {\n          if (app.name == theApp.name) {\n            app.deviceId = \" \";\n            console.log(app);\n          }\n        });\n      }\n    }); //   snapshot.docs.forEach(p=>{\n\n    console.log(snapshot.data()); // let oneProduct = {};\n    // oneProduct.name = p.data().name;\n    // oneProduct.visibility = p.data().visibility;\n    // oneProduct.apps = p.data().apps;\n    // oneProduct.comments = p.data().comment;\n    // oneProduct.purchased = false;\n    // oneProduct.purchasedUrl = p.data().purchasedUrl;\n    // oneProduct.unpurchasedUrl = p.data().unpurchasedUrl;\n    // oneProduct.datePurchased = \"22/1/2021\";\n    // p.data().apps.forEach(app=>{\n    //     oneProduct.apps.push({\n    //         name:app,\n    //         active:false,\n    //         purchased: false,\n    //         credentials : false,\n    //         expireDate: \"30/3/2021\",\n    //         timesAppLaunchedLastLogin : 3,\n    //         timesAppLaunchedPurchased : 4,\n    //         lastLaunchDate : \"23-12-2020\",\n    //         timesAppLaunched : 7,\n    //         deviceId : \" \"\n    //     })\n    // })\n    // if(oneProduct.name == product.name){\n    //     if(app == theApp.name){\n    //         app.deviceId = \" \"\n    //     }\n    // }\n    // theUser.products.push(oneProduct);\n    // console.log(\"the user is \", theUser.products)\n    //   })\n\n    return db.collection('users').set(theUser);\n  }).catch(err => {\n    console.log(err);\n  });\n};","map":{"version":3,"sources":["E:/Folder/React/projects/my_freelance_work/M.Ramdan Work/light-bootstrap-dashboard-react/src/components/userPortal/appAction.js"],"names":["db","handleDeactiveApp","user","theProduct","theApp","console","log","collection","doc","uid","get","then","snapshot","theUser","data","products","forEach","product","name","apps","app","deviceId","set","catch","err"],"mappings":"AAAA,SAASA,EAAT,QAAmB,gBAAnB;AAGA,OAAO,MAAMC,iBAAiB,GAAG,CAACC,IAAD,EAAMC,UAAN,EAAiBC,MAAjB,KAA4B;AACzDC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACAN,EAAAA,EAAE,CAACO,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BN,IAAI,CAACO,GAAhC,EAAqCC,GAArC,GAA2CC,IAA3C,CAAgDC,QAAQ,IAAG;AACzD,QAAIC,OAAO,GAAGD,QAAQ,CAACE,IAAT,EAAd;AACAD,IAAAA,OAAO,CAACE,QAAR,GAAmBH,QAAQ,CAACE,IAAT,GAAgBC,QAAnC;AAEAF,IAAAA,OAAO,CAACE,QAAR,CAAiBC,OAAjB,CAA0BC,OAAO,IAAI;AACnC,UAAGd,UAAU,CAACe,IAAX,IAAmBD,OAAO,CAACC,IAA9B,EAAmC;AAC/BD,QAAAA,OAAO,CAACE,IAAR,CAAaH,OAAb,CAAqBI,GAAG,IAAI;AACxB,cAAGA,GAAG,CAACF,IAAJ,IAAYd,MAAM,CAACc,IAAtB,EAA2B;AACvBE,YAAAA,GAAG,CAACC,QAAJ,GAAe,GAAf;AACAhB,YAAAA,OAAO,CAACC,GAAR,CAAYc,GAAZ;AACH;AACJ,SALD;AAMH;AACF,KATD,EAJyD,CAe3D;;AACMf,IAAAA,OAAO,CAACC,GAAR,CAAYM,QAAQ,CAACE,IAAT,EAAZ,EAhBqD,CAiBvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ;;AAEE,WAAOd,EAAE,CAACO,UAAH,CAAc,OAAd,EAAuBe,GAAvB,CAA2BT,OAA3B,CAAP;AACC,GAlDH,EAmDCU,KAnDD,CAmDOC,GAAG,IAAE;AACVnB,IAAAA,OAAO,CAACC,GAAR,CAAYkB,GAAZ;AACD,GArDD;AAsDD,CAxDI","sourcesContent":["import { db } from \"../../firebase\";\r\n\r\n\r\nexport const handleDeactiveApp = (user,theProduct,theApp) => {\r\n    console.log(\"jnh\")\r\n    db.collection(\"users\").doc(user.uid).get().then(snapshot =>{\r\n      let theUser = snapshot.data();\r\n      theUser.products = snapshot.data().products;\r\n\r\n      theUser.products.forEach( product => {\r\n        if(theProduct.name == product.name){\r\n            product.apps.forEach(app => {\r\n                if(app.name == theApp.name){\r\n                    app.deviceId = \" \"\r\n                    console.log(app)\r\n                }\r\n            })\r\n        }\r\n      })\r\n        \r\n    //   snapshot.docs.forEach(p=>{\r\n          console.log(snapshot.data())\r\n        // let oneProduct = {};\r\n        // oneProduct.name = p.data().name;\r\n        // oneProduct.visibility = p.data().visibility;\r\n        // oneProduct.apps = p.data().apps;\r\n        // oneProduct.comments = p.data().comment;\r\n        // oneProduct.purchased = false;\r\n        // oneProduct.purchasedUrl = p.data().purchasedUrl;\r\n        // oneProduct.unpurchasedUrl = p.data().unpurchasedUrl;\r\n        // oneProduct.datePurchased = \"22/1/2021\";\r\n        // p.data().apps.forEach(app=>{\r\n        //     oneProduct.apps.push({\r\n        //         name:app,\r\n        //         active:false,\r\n        //         purchased: false,\r\n        //         credentials : false,\r\n        //         expireDate: \"30/3/2021\",\r\n        //         timesAppLaunchedLastLogin : 3,\r\n        //         timesAppLaunchedPurchased : 4,\r\n        //         lastLaunchDate : \"23-12-2020\",\r\n        //         timesAppLaunched : 7,\r\n        //         deviceId : \" \"\r\n        //     })\r\n        // })\r\n        // if(oneProduct.name == product.name){\r\n        //     if(app == theApp.name){\r\n        //         app.deviceId = \" \"\r\n        //     }\r\n        // }\r\n        // theUser.products.push(oneProduct);\r\n        // console.log(\"the user is \", theUser.products)\r\n    //   })\r\n\r\n      return db.collection('users').set(theUser) \r\n      })\r\n    .catch(err=>{\r\n      console.log(err);\r\n    })\r\n  }"]},"metadata":{},"sourceType":"module"}
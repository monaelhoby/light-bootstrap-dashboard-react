{"ast":null,"code":"import { db } from \"../../firebase\";\nexport const handleDeactiveApp = (user, product, theApp, setUser) => {\n  let newUser = user;\n  let editableProduct = newUser.products.find(p => {\n    return p.name == product.name;\n  });\n  newUser.products = newUser.products.filter(p => {\n    return p.name !== product.name;\n  });\n  editableProduct.apps.forEach(app => {\n    if (app.name.name == theApp.name.name) {\n      app.deviceId = \"\";\n    }\n  });\n  newUser.products.push(editableProduct);\n  setUser({ ...newUser\n  });\n  return db.collection('users').doc(user.id).set(newUser);\n};\nexport const handleDeactiveAllApps = (user, product, setUser, callback) => {\n  let newUser = user;\n  let editableProduct = newUser.products.find(p => {\n    return p.name == product.name;\n  });\n  newUser.products = newUser.products.filter(p => {\n    return p.name !== product.name;\n  });\n  editableProduct.apps.forEach(app => {\n    app.deviceId = \"\";\n  });\n  newUser.products.push(editableProduct);\n  setUser({ ...newUser\n  });\n  callback();\n  return db.collection('users').doc(user.id).set(newUser);\n};\nexport const handleInactiveCode = (code, email, id, theCodeObject, callback) => {\n  db.collection(\"codes\").get().then(snapshot => {\n    let activeCodeObject = {};\n    snapshot.docs.forEach(oneCode => {\n      if (Array.isArray(oneCode.data().code)) {\n        let activeCode = \"\";\n        activeCode = oneCode.data().code.find(singleCode => singleCode == code);\n\n        if (activeCode) {\n          activeCodeObject = oneCode.data();\n        }\n      } else if (!Array.isArray(oneCode.data().code)) {\n        if (oneCode.data().code == code) {\n          activeCodeObject = oneCode.data();\n        } else {\n          return;\n        }\n      }\n    });\n    db.collection(\"inactiveCodes\").add({\n      inactiveCode: code,\n      activatedBy: email,\n      dataAdded: new Date().toLocaleString(),\n      placeOfPurchase: activeCodeObject.purchasedLocation,\n      productActivated: activeCodeObject.productActivated,\n      notes: activeCodeObject.notes\n    }).then(() => {\n      // db.collection(\"codes\").doc(theCodeObject.id).delete()\n      updateAppsinUser(theCodeObject.data().productActivated, id, code);\n      callback();\n    });\n  }).catch(err => {\n    console.log(err);\n  });\n};\n\nconst updateAppsinUser = (productsActivated, id, code) => {\n  db.collection(\"users\").doc(id).get().then(snapshot => {\n    let allProducts = [];\n    let theNewProduct = {};\n    let productActivatedExist = [];\n    snapshot.data().products.forEach(product => {\n      productActivatedExist = productsActivated.find(p => product.name == p.productName);\n      productActivatedExist.push(productActivatedExist);\n      console.log(\"productActivatedExist\", productActivatedExist);\n      theNewProduct.name = product.name;\n      theNewProduct.purchasedUrl = product.purchasedUrl;\n      theNewProduct.unpurchasedUrl = product.unpurchasedUrl;\n      theNewProduct.visibility = product.visibility;\n      theNewProduct.description = product.description, theNewProduct.productIcon = product.productIcon, theNewProduct.id = product.id;\n      theNewProduct.apps = [];\n      let generatedApp = {};\n      product.apps.forEach(app => {\n        if (productsActivated) {\n          productsActivated.forEach(ActivatedProduct => {\n            if (app.name.name == ActivatedProduct.appName) {\n              generatedApp.active = true;\n              generatedApp.purchased = true;\n              generatedApp.credentials = app.credentials;\n              generatedApp.expireDate = app.expireDate;\n              generatedApp.timesAppLaunchedLastLogin = app.timesAppLaunchedLastLogin;\n              generatedApp.timesAppLaunchedPurchased = app.timesAppLaunchedPurchased;\n              generatedApp.lastLaunchDate = app.lastLaunchDate;\n              generatedApp.timesAppLaunched = app.timesAppLaunched;\n              generatedApp.deviceId = app.deviceId;\n              generatedApp.activatedOn = new Date().toLocaleString();\n              generatedApp.codeUsed = code;\n              generatedApp.DateofLastUse = app.DateofLastUse;\n              generatedApp.LaunchesSinceActive = app.LaunchesSinceActive;\n              generatedApp.name = app.name;\n            }\n          });\n        } else {\n          product.apps.forEach(app => {\n            generatedApp.active = app.active, generatedApp.purchased = app.purchased;\n            generatedApp.credentials = app.credentials;\n            generatedApp.expireDate = app.expireDate;\n            generatedApp.timesAppLaunchedLastLogin = app.timesAppLaunchedLastLogin;\n            generatedApp.timesAppLaunchedPurchased = app.timesAppLaunchedPurchased;\n            generatedApp.lastLaunchDate = app.lastLaunchDate;\n            generatedApp.timesAppLaunched = app.timesAppLaunched;\n            generatedApp.deviceId = app.deviceId;\n            generatedApp.activatedOn = app.activatedOn;\n            generatedApp.codeUsed = app.codeUsed;\n            generatedApp.DateofLastUse = app.DateofLastUse;\n            generatedApp.LaunchesSinceActive = app.LaunchesSinceActive;\n            generatedApp.name = app.name;\n          });\n        }\n\n        theNewProduct.apps.push(generatedApp); // console.log(\"theNewProduct\",theNewProduct)\n      });\n      allProducts.push(theNewProduct);\n    }); // console.log(\"allProducts\",allProducts)\n    // db.collection(\"users\").doc(id).set({\n    //     products: [...allProducts]\n    // },{merge:true})\n  });\n};","map":{"version":3,"sources":["E:/Folder/React/projects/my_freelance_work/M.Radwan Work/light-bootstrap-dashboard-react/src/components/userPortal/appAction.js"],"names":["db","handleDeactiveApp","user","product","theApp","setUser","newUser","editableProduct","products","find","p","name","filter","apps","forEach","app","deviceId","push","collection","doc","id","set","handleDeactiveAllApps","callback","handleInactiveCode","code","email","theCodeObject","get","then","snapshot","activeCodeObject","docs","oneCode","Array","isArray","data","activeCode","singleCode","add","inactiveCode","activatedBy","dataAdded","Date","toLocaleString","placeOfPurchase","purchasedLocation","productActivated","notes","updateAppsinUser","catch","err","console","log","productsActivated","allProducts","theNewProduct","productActivatedExist","productName","purchasedUrl","unpurchasedUrl","visibility","description","productIcon","generatedApp","ActivatedProduct","appName","active","purchased","credentials","expireDate","timesAppLaunchedLastLogin","timesAppLaunchedPurchased","lastLaunchDate","timesAppLaunched","activatedOn","codeUsed","DateofLastUse","LaunchesSinceActive"],"mappings":"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","sourcesContent":["import { db } from \"../../firebase\";\r\n\r\n\r\nexport const handleDeactiveApp = (user,product,theApp,setUser) => {\r\n    let newUser = user;\r\n    let editableProduct = newUser.products.find(p=>{\r\n        return p.name == product.name;\r\n    })\r\n    \r\n    newUser.products = newUser.products.filter(p=>{\r\n        return p.name !== product.name;\r\n    })\r\n\r\n    editableProduct.apps.forEach(app => {\r\n        if (app.name.name == theApp.name.name){\r\n            app.deviceId = \"\";\r\n        }\r\n    });\r\n    newUser.products.push(editableProduct);\r\n    setUser({...newUser})\r\n\r\n    return db.collection('users').doc(user.id).set(newUser) \r\n    \r\n  }\r\n\r\n  export const handleDeactiveAllApps = (user,product,setUser,callback) => {\r\n    let newUser = user;\r\n    let editableProduct = newUser.products.find(p=>{\r\n        return p.name == product.name;\r\n    })\r\n    \r\n    newUser.products = newUser.products.filter(p=>{\r\n        return p.name !== product.name;\r\n    })\r\n\r\n    editableProduct.apps.forEach(app => {\r\n            app.deviceId = \"\";\r\n    });\r\n    newUser.products.push(editableProduct);\r\n    setUser({...newUser})\r\n    callback()\r\n    return db.collection('users').doc(user.id).set(newUser) \r\n    \r\n  }\r\n\r\n  export const handleInactiveCode = (code, email, id, theCodeObject,callback) => {\r\n    db.collection(\"codes\").get()\r\n    .then(snapshot => {\r\n    let activeCodeObject = {};\r\n    snapshot.docs.forEach(oneCode => {\r\n        if(Array.isArray(oneCode.data().code)){\r\n            let activeCode = \"\";\r\n            activeCode = oneCode.data().code.find(singleCode => singleCode==code);\r\n            if(activeCode){\r\n                activeCodeObject = oneCode.data() \r\n            }\r\n        }else if(!Array.isArray(oneCode.data().code)){\r\n            if(oneCode.data().code == code) {\r\n                activeCodeObject = oneCode.data() \r\n            }else{\r\n                return\r\n            }\r\n        }\r\n    })\r\n    db.collection(\"inactiveCodes\").add({\r\n        inactiveCode : code,\r\n        activatedBy : email,\r\n        dataAdded : new Date().toLocaleString(),\r\n        placeOfPurchase: activeCodeObject.purchasedLocation,\r\n        productActivated: activeCodeObject.productActivated,\r\n        notes: activeCodeObject.notes,\r\n    }).then(() => {\r\n        // db.collection(\"codes\").doc(theCodeObject.id).delete()\r\n        updateAppsinUser(theCodeObject.data().productActivated,id,code)\r\n        callback()\r\n    })\r\n    }).catch(err => {\r\n        console.log(err)\r\n    })\r\n  }\r\n\r\n  const updateAppsinUser = (productsActivated, id,code)=>{\r\n    db.collection(\"users\").doc(id).get()\r\n    .then(snapshot=>{\r\n        let allProducts=[]\r\n        let theNewProduct = {};\r\n        let productActivatedExist = [];\r\n        snapshot.data().products.forEach((product) => {\r\n            productActivatedExist = productsActivated.find(p => product.name == p.productName)\r\n            productActivatedExist.push(productActivatedExist)\r\n            console.log(\"productActivatedExist\",productActivatedExist)\r\n            theNewProduct.name = product.name;\r\n            theNewProduct.purchasedUrl= product.purchasedUrl;\r\n            theNewProduct.unpurchasedUrl= product.unpurchasedUrl;\r\n            theNewProduct.visibility= product.visibility;\r\n            theNewProduct.description= product.description,\r\n            theNewProduct.productIcon= product.productIcon,\r\n            theNewProduct.id = product.id;\r\n            theNewProduct.apps = [];\r\n            let generatedApp   = {};\r\n            product.apps.forEach(app => {\r\n                if(productsActivated){\r\n                    productsActivated.forEach((ActivatedProduct)=>{\r\n                        if(app.name.name == ActivatedProduct.appName){\r\n                            generatedApp.active = true\r\n                            generatedApp.purchased= true\r\n                            generatedApp.credentials = app.credentials\r\n                            generatedApp.expireDate= app.expireDate\r\n                            generatedApp.timesAppLaunchedLastLogin = app.timesAppLaunchedLastLogin\r\n                            generatedApp.timesAppLaunchedPurchased = app.timesAppLaunchedPurchased\r\n                            generatedApp.lastLaunchDate = app.lastLaunchDate\r\n                            generatedApp.timesAppLaunched = app.timesAppLaunched\r\n                            generatedApp.deviceId = app.deviceId \r\n                            generatedApp.activatedOn= new Date().toLocaleString()\r\n                            generatedApp.codeUsed= code\r\n                            generatedApp.DateofLastUse= app.DateofLastUse\r\n                            generatedApp.LaunchesSinceActive= app.LaunchesSinceActive\r\n                            generatedApp.name = app.name\r\n                        }\r\n                    })\r\n                }else{\r\n                    product.apps.forEach((app)=>{\r\n                        generatedApp.active = app.active,\r\n                        generatedApp.purchased= app.purchased\r\n                        generatedApp.credentials = app.credentials\r\n                        generatedApp.expireDate= app.expireDate\r\n                        generatedApp.timesAppLaunchedLastLogin = app.timesAppLaunchedLastLogin\r\n                        generatedApp.timesAppLaunchedPurchased = app.timesAppLaunchedPurchased\r\n                        generatedApp.lastLaunchDate = app.lastLaunchDate\r\n                        generatedApp.timesAppLaunched = app.timesAppLaunched\r\n                        generatedApp.deviceId = app.deviceId \r\n                        generatedApp.activatedOn= app.activatedOn\r\n                        generatedApp.codeUsed= app.codeUsed\r\n                        generatedApp.DateofLastUse= app.DateofLastUse\r\n                        generatedApp.LaunchesSinceActive= app.LaunchesSinceActive\r\n                        generatedApp.name = app.name\r\n                    })\r\n                }\r\n                theNewProduct.apps.push(generatedApp)\r\n                // console.log(\"theNewProduct\",theNewProduct)\r\n            })\r\n            allProducts.push(theNewProduct)\r\n        })\r\n        // console.log(\"allProducts\",allProducts)\r\n        // db.collection(\"users\").doc(id).set({\r\n        //     products: [...allProducts]\r\n        // },{merge:true})\r\n    })\r\n}"]},"metadata":{},"sourceType":"module"}
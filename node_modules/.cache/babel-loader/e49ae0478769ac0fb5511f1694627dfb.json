{"ast":null,"code":"import { db } from '../firebase'; // import {crypto} from 'crypto'\n\nconst crypto = require(\"crypto\");\n\nexport const handleAddCode = (code, setCodes, callback) => {\n  const length = Number(code.lengthCode);\n  let cryptoCode = null;\n  cryptoCode = crypto.randomBytes(length).toString(\"hex\");\n  db.collection(\"codes\").add({\n    perfixCode: code.perfixCode,\n    code: code.perfixCode + cryptoCode,\n    dateAdded: new Date().toLocaleString(),\n    productActivated: code.apps,\n    purchasedLocation: code.purchasedLocation,\n    notes: code.notes\n  }).then(codes => {\n    db.collection(\"codes\").get().then(snapshot => {\n      let codes = [];\n      snapshot.docs.forEach(code => {\n        code.checked = false;\n        codes.push(code);\n      });\n      setCodes([...codes]);\n      callback();\n    });\n  }).catch(error => {\n    console.error(\"Error writing document: \", error);\n  });\n};\nexport const handleAddCodes = (code, setCodes, callback) => {\n  const length = Number(code.lengthCode);\n  let cryptoCode = null;\n  cryptoCode = crypto.randomBytes(3).toString(\"hex\");\n  let codes = [];\n\n  for (let i = 0; i < code.quantity; i++) {\n    codes.push(code.perfixCode + cryptoCode);\n  }\n\n  db.collection(\"codes\").add({\n    perfixCode: code.perfixCode,\n    code: codes,\n    dateAdded: new Date().toLocaleString(),\n    productActivated: code.apps,\n    purchasedLocation: code.purchasedLocation,\n    notes: code.notes\n  }).then(codes => {\n    db.collection(\"codes\").get().then(snapshot => {\n      let codes = [];\n      snapshot.docs.forEach(code => {\n        code.checked = false;\n        codes.push(code);\n      });\n      setCodes([...codes]);\n      callback();\n    });\n  }).catch(error => {\n    console.error(\"Error writing document: \", error);\n  });\n};\nexport const handleDeleteCode = (uid, codes, i, setCodes) => {\n  codes.splice(i, 1);\n  setCodes([...codes]);\n  return db.collection(\"codes\").doc(uid).delete().then(() => {// callback()\n  }).catch(err => {\n    console.log(\"Err is \", err);\n  });\n};\nexport const handleDeleteCodes = (ids, setCodes) => {\n  return db.collection(\"codes\").get().then(snapshot => {\n    snapshot.docs.forEach(code => {\n      let codes = [];\n      ids.forEach(uid => {\n        db.collection(\"codes\").doc(uid).delete();\n        codes.push(code);\n      });\n      setCodes([...codes]);\n    });\n  }).catch(err => {\n    console.log(\"ERR\", err);\n  });\n};\nexport const handleEditCode = (editCode, setCodes, callback) => {\n  const length = Number(code.lengthCode);\n  let cryptoCode = null;\n  cryptoCode = crypto.randomBytes(length).toString(\"hex\");\n  db.collection(\"codes\").doc(editCode.id).add({\n    perfixCode: editCode.perfixCode,\n    code: editCode.perfixCode + cryptoCode,\n    productActivated: editCode.apps,\n    notes: editCode.notes\n  }).then(codes => {\n    db.collection(\"codes\").get().then(snapshot => {\n      let codes = [];\n      snapshot.docs.forEach(code => {\n        code.checked = false;\n        codes.push(code);\n      });\n      setCodes([...codes]);\n      callback();\n    });\n  }).catch(error => {\n    console.error(\"Error writing document: \", error);\n  });\n};","map":{"version":3,"sources":["E:/Folder/React/projects/my_freelance_work/M.Radwan Work/light-bootstrap-dashboard-react/src/views/codeActions.js"],"names":["db","crypto","require","handleAddCode","code","setCodes","callback","length","Number","lengthCode","cryptoCode","randomBytes","toString","collection","add","perfixCode","dateAdded","Date","toLocaleString","productActivated","apps","purchasedLocation","notes","then","codes","get","snapshot","docs","forEach","checked","push","catch","error","console","handleAddCodes","i","quantity","handleDeleteCode","uid","splice","doc","delete","err","log","handleDeleteCodes","ids","handleEditCode","editCode","id"],"mappings":"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","sourcesContent":["import {db} from '../firebase';\r\n// import {crypto} from 'crypto'\r\nconst crypto = require(\"crypto\");\r\n\r\nexport const handleAddCode = (code,setCodes,callback) => {\r\n    const length = Number(code.lengthCode) \r\n    let cryptoCode = null;\r\n    cryptoCode = crypto.randomBytes(length).toString(\"hex\")\r\n    db.collection(\"codes\").add({\r\n        perfixCode : code.perfixCode,\r\n        code : code.perfixCode+cryptoCode,\r\n        dateAdded : new Date().toLocaleString(),\r\n        productActivated : code.apps,\r\n        purchasedLocation : code.purchasedLocation,\r\n        notes : code.notes,\r\n    })\r\n    .then((codes) => {\r\n        db.collection(\"codes\").get().then(snapshot=>{\r\n            let codes = [];\r\n            snapshot.docs.forEach(code=>{\r\n                code.checked = false;\r\n                codes.push(code)\r\n            })\r\n            setCodes([...codes]);\r\n            callback()\r\n        })\r\n    })\r\n    .catch((error) => {\r\n        console.error(\"Error writing document: \", error);\r\n    });\r\n}\r\n\r\nexport const handleAddCodes = (code,setCodes,callback) => {\r\n    const length = Number(code.lengthCode) \r\n    let cryptoCode = null;\r\n    cryptoCode = crypto.randomBytes(3).toString(\"hex\");\r\n    let codes=[]\r\n    for(let i =0; i<code.quantity; i++){\r\n        codes.push(code.perfixCode+cryptoCode)\r\n    }\r\n    db.collection(\"codes\").add({\r\n        perfixCode : code.perfixCode,\r\n        code : codes,\r\n        dateAdded : new Date().toLocaleString(),\r\n        productActivated : code.apps,\r\n        purchasedLocation : code.purchasedLocation,\r\n        notes : code.notes,\r\n    })\r\n    .then((codes) => {\r\n        db.collection(\"codes\").get().then(snapshot=>{\r\n            let codes = [];\r\n            snapshot.docs.forEach(code=>{\r\n                code.checked = false;\r\n                codes.push(code)\r\n            })\r\n            setCodes([...codes]);\r\n            callback()\r\n        })\r\n    })\r\n    .catch((error) => {\r\n        console.error(\"Error writing document: \", error);\r\n    });\r\n}\r\n\r\nexport const handleDeleteCode = (uid,codes,i,setCodes)=>{\r\n    codes.splice(i, 1);\r\n    setCodes([...codes]);\r\n    return db.collection(\"codes\").doc(uid).delete()\r\n    .then(() => {\r\n        // callback()\r\n    })\r\n    .catch(err=>{\r\n        console.log(\"Err is \", err)\r\n    })\r\n}\r\n\r\nexport const handleDeleteCodes = (ids, setCodes) =>{  \r\n    return db.collection(\"codes\").get().then((snapshot) => {\r\n        snapshot.docs.forEach((code) => {\r\n            let codes = [];\r\n            ids.forEach(uid => {\r\n                db.collection(\"codes\").doc(uid).delete();\r\n                codes.push(code)\r\n            })\r\n            setCodes([...codes])\r\n        })\r\n    }).catch(err=>{\r\n    console.log(\"ERR\",err);\r\n    })\r\n}\r\n\r\nexport const handleEditCode = (editCode,setCodes,callback) => {\r\n    const length = Number(code.lengthCode) \r\n    let cryptoCode = null;\r\n    cryptoCode = crypto.randomBytes(length).toString(\"hex\")\r\n    db.collection(\"codes\").doc(editCode.id).add({\r\n        perfixCode : editCode.perfixCode,\r\n        code : editCode.perfixCode+cryptoCode,\r\n        productActivated : editCode.apps,\r\n        notes : editCode.notes,\r\n    })\r\n    .then((codes) => {\r\n        db.collection(\"codes\").get().then(snapshot=>{\r\n            let codes = [];\r\n            snapshot.docs.forEach(code=>{\r\n                code.checked = false;\r\n                codes.push(code)\r\n            })\r\n            setCodes([...codes]);\r\n            callback()\r\n        })\r\n    })\r\n    .catch((error) => {\r\n        console.error(\"Error writing document: \", error);\r\n    });\r\n}"]},"metadata":{},"sourceType":"module"}